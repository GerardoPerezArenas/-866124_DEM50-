<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Nueva Contrataci√≥n Popup</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }
        .title {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #007bff;
        }
        .button-container {
            text-align: center;
            margin: 30px 0;
        }
        .botonGeneral {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 14px;
            border-radius: 4px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }
        .botonGeneral:hover {
            background-color: #0056b3;
        }
        .info {
            background: #e7f3ff;
            border: 1px solid #b3d7ff;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
        }
        .demo-form {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
        }
        .form-row {
            margin: 15px 0;
        }
        .form-row label {
            display: inline-block;
            width: 200px;
            font-weight: bold;
        }
        .form-row input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 250px;
        }
    </style>
    <script src="scripts/popup.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="title">Test de Funcionalidad - Nueva Contrataci√≥n</h1>
        
        <div class="info">
            <h3>Estado de la Correcci√≥n:</h3>
            <p><strong>‚úÖ Problema Identificado:</strong> El archivo <code>scripts/popup.js</code> estaba ausente.</p>
            <p><strong>‚úÖ Soluci√≥n Implementada:</strong> Se ha creado el archivo <code>popup.js</code> con la funci√≥n <code>lanzarPopUpModal</code>.</p>
            <p><strong>‚úÖ Mejoras Adicionales:</strong> Se han a√±adido fallbacks para datos de dropdowns y compatibilidad con navegadores.</p>
        </div>

        <div class="button-container">
            <button type="button" class="botonGeneral" onclick="testNuevaContratacion()">
                üöÄ Test Nueva Contrataci√≥n
            </button>
            <button type="button" class="botonGeneral" onclick="testPopupSimple()">
                üìù Test Popup Simple
            </button>
        </div>

        <div class="demo-form">
            <h3>Formulario de Ejemplo (Contenido similar al popup):</h3>
            <div class="form-row">
                <label>DNI/NIE:</label>
                <input type="text" placeholder="12345678A" />
            </div>
            <div class="form-row">
                <label>Nombre:</label>
                <input type="text" placeholder="Nombre del trabajador" />
            </div>
            <div class="form-row">
                <label>Apellidos:</label>
                <input type="text" placeholder="Apellidos del trabajador" />
            </div>
            <div class="form-row">
                <label>Fecha de Nacimiento:</label>
                <input type="date" />
            </div>
            <div class="form-row">
                <label>Puesto de Trabajo:</label>
                <input type="text" placeholder="Descripci√≥n del puesto" />
            </div>
        </div>

        <div class="info">
            <h3>Resultado Esperado:</h3>
            <p>Al hacer clic en "Test Nueva Contrataci√≥n", deber√≠a abrirse una ventana popup que muestre el formulario completo de nueva contrataci√≥n. Si aparece un error de popup bloqueado, permitir popups para esta p√°gina y volver a intentar.</p>
        </div>
    </div>

    <script>
        function testNuevaContratacion() {
            // Simulate the exact same call as in melanbide11.jsp
            // Using a local URL that shows the form structure
            lanzarPopUpModal('jsp/extension/melanbide11/nuevaContratacion.jsp', 750, 1200, 'yes', 'yes', function (result) {
                console.log('Popup closed with result:', result);
                alert('Popup cerrado correctamente. Resultado: ' + (result ? result : 'ninguno'));
            });
        }

        function testPopupSimple() {
            // Test with a simple local page to verify popup functionality
            lanzarPopUpModal('data:text/html,<html><head><title>Test Popup</title></head><body><h1>¬°Popup Funcionando!</h1><p>Esta ventana demuestra que el popup funciona correctamente.</p><button onclick="window.close()">Cerrar</button></body></html>', 400, 600, 'no', 'yes');
        }

        // Test if popup.js is loaded correctly
        window.onload = function() {
            if (typeof lanzarPopUpModal === 'function') {
                console.log('‚úÖ popup.js loaded successfully');
                console.log('‚úÖ lanzarPopUpModal function is available');
            } else {
                console.error('‚ùå popup.js not loaded or lanzarPopUpModal function not found');
                alert('Error: No se pudo cargar popup.js');
            }
        };
    </script>
</body>
</html>